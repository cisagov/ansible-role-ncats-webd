---
dist: xenial
language: python
python: 3.7
services: docker

env:
  global:
    - secure: "I3kXBCObjfmFJgXTMRg5kPlJMFj6mtgBGCVSSULS84k8UVSmInpJeki\
      8n5jOM9ueSM4s1L4Og4I2CSzwfmvZ2jrUPN95l4UBAAGSejDPuObIcwGB/mTMUvz\
      VfiheaavDgl3lfSaWTCIVkalxHSllSS64kZja4VBGDNlJxVpoo5H5XLl8BnUXNJ7\
      EPrdC4LiBXGtllx3kXFdhRtdTU7/xUEzVpgYvfHquwLgFWHOZGFvBC+I83v9LwWA\
      dk02iFPj0LaYRvvPCQR5w9tVAARL7qp4WU5+8A1BpZu3H9Xz7GYiUvcQgxjQjTnf\
      4Xps4R0c6sh+7V4Ad75C0UVDgalPqbUDEEyaH8Y/eTzqRgNXZWzXvitrAaB9GUjc\
      N2BSP6/obSbhM/zMXori4lvYR1DlIn+ITLGE5ny2Kd3dhMk1WKHYommeyBUa9Oxt\
      ssO4VET2obkQVKPF3xnfqa2dvZH6od1owxMJGd3k47ASv5IM057XACPd/P61BRiJ\
      jTL7C22zidRsgP0DJSdWqPB4LigAc6F61T1nk6FqpjifvJBEMjsVHpL0Dqk2kHBS\
      HoitkQSIoMt71FYFa+d91S0Cguh8P7SSylfkEhLngBvaoQB8sHiNB9I2jPHnMh9M\
      xOPIbqULlQsa7LUx0XtYmkRp/MrhYtzUT7IUtxZHtl3aa5yE6Hgw="
    - secure: "DcsMf2p5/VLPTeXh7CWtrjNskhCGoamPGlDPLG3u5Xp4nTP9nKxJ1T3\
      DkhEHJfeayH5rWJ52yhFXSuOfX+BYeqa5unGmf+4L4TcYfR1qHnUk/GQtoxxqncv\
      dDQSN9su/vRBWX8AHBpkGp1nOA5tQUz4H61resZRoeDoHBLRWtPDzIbr2yFxkCaj\
      qhlZi0imc+e1+1n5stQ3fEi21qBhL0p06x5j7LwolfQaywXg9eiiE5IgZA541gxW\
      nYaAKcKWc5W16GwnWEkEuFK8IZDXot9HLQjKnHu4N5Y4Tqpna1JQ1R/J/oE6ViTq\
      s8QSxXr1bt3tz+iZPPKsnYETFS21lOhqqUg29ACRMyRVEjOzq5ATtycThW3yUMeU\
      gXkewFOmB6xAeJlMrAqdV7zoDDgrYpkTZAs5rdsQEHuSMiJRQzDDp6mynEGrK9Nw\
      vBYtf9C76mKFVq02RIC3dzmyIsRK6Jd23oy3juKBNRBXJfg9v55RofghKlwlWZhd\
      fabjmiqAwe73fkRN7iY/S4cTgzvEMuro1C9FR7oVaNk5pfdW+ZlJiWhCGnefFlxo\
      VGTxSJPmpQojbpgSr1ebMti/48o1xCpikYwXeLY7meEfdUPonIcrfT1G2StlOl+3\
      8PXqytcqbAn+2T75Uzrpw5krBc6arBnyxkv1nYCCfYZ2xD1RI22k="
    - secure: "mVqP/Kq8BDeTgFdQGSijbH8kBMKVgumbYSIYa5+dHYehlbNxwmGa+mT\
      HVRewdOcmkR+tIFVxN++Ao22SA+KZv9/Y+6lGnruj8187HDOaNjDSXeTPzsYoSzO\
      IZDKzza7RXG8ZqQlOXQbqpAHBlUpvQQHSOc4sjtoiTlTzPieK76uqd/5j5YaDRWB\
      AoyD0Xu043rFQLDjDnYNvxl9l67LLib8DCHJWW/Bkr6VNQNcoxvFQFoRKJjwC0KL\
      WBKouyJGllP4ZN3iOUdCsut4ol8zybosTqv3KaPiNEGM3w2X/sqBKjgzrLWxuxtY\
      CkGt38GvtcJo3hWCEMM1fnhzxL2sm933x/JzvkP7sVvwvFHeEnL2ScdnFwOQU/EH\
      4HbO0rWS8wLVxbQQjMoQkyh8lXgqYHDMItGFKzYTwutH5IiacRpKimsY1+2n5PNx\
      rtxhPZ3mqNf6HSCrE7xWZ6HZ3qwmThXAPTnOVPhqRBuvOmuAqgTunOHn5xP7FWZi\
      AqGHDcSY6sNzbMuMQjqIIxduTqlXXYBQBL6I6fTjSltuUKpEYZYY7bjlAPTVu+wJ\
      KfNbRKotCmSxW0Q5XYiJcanIBy5XOX5voK1XD8aPwQD3iSgv6vonMcqHQKwiD0J2\
      9p7OeyWW7TiJDwWihsy13Mrt2TZkf7j3OFw38Kq6384jQ8ozeAfw="

# Install terraform and terraform-doc
before_install:
  - >
    wget
    https://releases.hashicorp.com/terraform/0.11.13/terraform_0.11.13_linux_amd64.zip
    -O terraform.zip
  - sudo unzip terraform.zip -d /opt/terraform
  - sudo ln -s /opt/terraform/terraform /usr/bin/terraform
  - rm -f terraform.zip
  - go get github.com/segmentio/terraform-docs

install:
  - pip install --upgrade -r requirements-test.txt

script:
  - pre-commit run --all-files
  - molecule test
